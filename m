Return-Path: <stable+bounces-158338-lists+stable=lfdr.de@vger.kernel.org>
X-Original-To: lists+stable@lfdr.de
Delivered-To: lists+stable@lfdr.de
Received: from sv.mirrors.kernel.org (sv.mirrors.kernel.org [139.178.88.99])
	by mail.lfdr.de (Postfix) with ESMTPS id B3FD8AE5F04
	for <lists+stable@lfdr.de>; Tue, 24 Jun 2025 10:22:27 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sv.mirrors.kernel.org (Postfix) with ESMTPS id BF0C53B7E71
	for <lists+stable@lfdr.de>; Tue, 24 Jun 2025 08:22:02 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id A2E0D257ACA;
	Tue, 24 Jun 2025 08:22:20 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=163.com header.i=@163.com header.b="RA8XNdSd"
X-Original-To: stable@vger.kernel.org
Received: from m16.mail.163.com (m16.mail.163.com [220.197.31.3])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 32E36248F59
	for <stable@vger.kernel.org>; Tue, 24 Jun 2025 08:22:16 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=220.197.31.3
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1750753340; cv=none; b=BwsZVAdRT/laHnw3pP4Y5Ht8SOEV+OXeED+vaCAeXbBjWJU19fEbcaawc7z2mP40yLOIvlLfxg2uvL0/gg3E/ooiJ0ySWGhG8wo5tY9GnU14Q5cxCSskwRw5cqvJgn6OzG5Lt4xaIZKFGF/7p4EcBJcV6daIUjxHgDnSguwdtuI=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1750753340; c=relaxed/simple;
	bh=YmqCCNhrAhFvqsyVtD2StWdu7RasR0sP0BlrswX/AWI=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:Content-Type:
	 MIME-Version:Message-ID; b=Nv/P7G7GvPRrNQh7yvSYuyEF8mzP+cKS2tOdqV7G5ohf8DMaBL1EgxRG4WLaCEwcE/LqDLQHMMunQS9fczMP/x9g8k6n38VgY1MmplNKy8UpLelvuemE8WiNopFtr4l93nl0jDSXkj1rbdLSvF94wokXugJeQbGQUmG9KIbAQ58=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com; spf=pass smtp.mailfrom=163.com; dkim=fail (1024-bit key) header.d=163.com header.i=@163.com header.b=RA8XNdSd reason="signature verification failed"; arc=none smtp.client-ip=220.197.31.3
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=163.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
	s=s110527; h=Date:From:To:Subject:Content-Type:MIME-Version:
	Message-ID; bh=5T3NVfytyjKRvRFRhbC33Fzr/VOMrFiH5CIKbTkE9Lk=; b=R
	A8XNdSdW9muIPqKXnP38Pl4pXrQeZM4DNY99iH6ldvbSNIeXvNjysbOkU722hACj
	NlWwvM3FY34fxGeuysLgQAIBs/2rE+50ADMzkSJa6L06VJkKnf7Rb006augowyb3
	xMfAkma9Zc+oDupwYSsJzo7RaJuzJ+U9RFRIaQHyhs=
Received: from 00107082$163.com ( [111.35.191.166] ) by
 ajax-webmail-wmsvr-40-125 (Coremail) ; Tue, 24 Jun 2025 16:21:23 +0800
 (CST)
Date: Tue, 24 Jun 2025 16:21:23 +0800 (CST)
From: "David Wang" <00107082@163.com>
To: "Harry Yoo" <harry.yoo@oracle.com>
Cc: akpm@linux-foundation.org, surenb@google.com, kent.overstreet@linux.dev,
	oliver.sang@intel.com, cachen@purestorage.com, linux-mm@kvack.org,
	oe-lkp@lists.linux.dev, stable@vger.kernel.org
Subject: Re:[PATCH v3] lib/alloc_tag: do not acquire non-existent lock in
 alloc_tag_top_users()
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.14 build 20240801(9da12a7b)
 Copyright (c) 2002-2025 www.mailtech.cn 163com
In-Reply-To: <20250624072513.84219-1-harry.yoo@oracle.com>
References: <20250624072513.84219-1-harry.yoo@oracle.com>
X-NTES-SC: AL_Qu2eAvuevEoj5SmaZekZnEYQheY4XMKyuPkg1YJXOp80lCTc5jIlZ25NInnV9PmGOSG9oQmufQBX5cljXqllcrl0LItt3qKU+BOVvopdlBln
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=GBK
Precedence: bulk
X-Mailing-List: stable@vger.kernel.org
List-Id: <stable.vger.kernel.org>
List-Subscribe: <mailto:stable+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:stable+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Message-ID: <4f12c217.7a79.197a1070f55.Coremail.00107082@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID:fSgvCgD3XycEYFpo3r0jAA--.8846W
X-CM-SenderInfo: qqqrilqqysqiywtou0bp/xtbB0gt2qmhaUUU29gACsh
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==

QXQgMjAyNS0wNi0yNCAxNToyNToxMywgIkhhcnJ5IFlvbyIgPGhhcnJ5Lnlvb0BvcmFjbGUuY29t
PiB3cm90ZToKPmFsbG9jX3RhZ190b3BfdXNlcnMoKSBhdHRlbXB0cyB0byBsb2NrIGFsbG9jX3Rh
Z19jdHR5cGUtPm1vZF9sb2NrCj5ldmVuIHdoZW4gdGhlIGFsbG9jX3RhZ19jdHR5cGUgaXMgbm90
IGFsbG9jYXRlZCBiZWNhdXNlOgo+Cj4gIDEpIGFsbG9jIHRhZ2dpbmcgaXMgZGlzYWJsZWQgYmVj
YXVzZSBtZW0gcHJvZmlsaW5nIGlzIGRpc2FibGVkCj4gICAgICghYWxsb2NfdGFnX2N0dHlwZSkK
PiAgMikgYWxsb2MgdGFnZ2luZyBpcyBlbmFibGVkLCBidXQgbm90IHlldCBpbml0aWFsaXplZCAo
IWFsbG9jX3RhZ19jdHR5cGUpCj4gIDMpIGFsbG9jIHRhZ2dpbmcgaXMgZW5hYmxlZCwgYnV0IGZh
aWxlZCBpbml0aWFsaXphdGlvbgo+ICAgICAoIWFsbG9jX3RhZ19jdHR5cGUgb3IgSVNfRVJSKGFs
bG9jX3RhZ19jdHR5cGUpKQo+Cj5JbiBhbGwgY2FzZXMsIGFsbG9jX3RhZ19jdHR5cGUgaXMgbm90
IGFsbG9jYXRlZCwgYW5kIHRoZXJlZm9yZQo+YWxsb2NfdGFnX3RvcF91c2VycygpIHNob3VsZCBu
b3QgYXR0ZW1wdCB0byBhY3F1aXJlIHRoZSBzZW1hcGhvcmUuCj4KPlRoaXMgbGVhZHMgdG8gYSBj
cmFzaCBvbiBtZW1vcnkgYWxsb2NhdGlvbiBmYWlsdXJlIGJ5IGF0dGVtcHRpbmcgdG8KPmFjcXVp
cmUgYSBub24tZXhpc3RlbnQgc2VtYXBob3JlOgo+Cj4gIE9vcHM6IGdlbmVyYWwgcHJvdGVjdGlv
biBmYXVsdCwgcHJvYmFibHkgZm9yIG5vbi1jYW5vbmljYWwgYWRkcmVzcyAweGRmZmZmYzAwMDAw
MDAwMWI6IDAwMDAgWyMzXSBTTVAgS0FTQU4gTk9QVEkKPiAgS0FTQU46IG51bGwtcHRyLWRlcmVm
IGluIHJhbmdlIFsweDAwMDAwMDAwMDAwMDAwZDgtMHgwMDAwMDAwMDAwMDAwMGRmXQo+ICBDUFU6
IDIgVUlEOiAwIFBJRDogMSBDb21tOiBzeXN0ZW1kIFRhaW50ZWQ6IEcgICAgICBEICAgICAgICAg
ICAgIDYuMTYuMC1yYzIgIzEgVk9MVU5UQVJZCj4gIFRhaW50ZWQ6IFtEXT1ESUUKPiAgSGFyZHdh
cmUgbmFtZTogUUVNVSBTdGFuZGFyZCBQQyAoaTQ0MEZYICsgUElJWCwgMTk5NiksIEJJT1MgMS4x
Ni4yLWRlYmlhbi0xLjE2LjItMSAwNC8wMS8yMDE0Cj4gIFJJUDogMDAxMDpkb3duX3JlYWRfdHJ5
bG9jaysweGFhLzB4M2IwCj4gIENvZGU6IGQwIDdjIDA4IDg0IGQyIDBmIDg1IGEwIDAyIDAwIDAw
IDhiIDBkIGRmIDMxIGRkIDA0IDg1IGM5IDc1IDI5IDQ4IGI4IDAwIDAwIDAwIDAwIDAwIGZjIGZm
IGRmIDQ4IDhkIDZiIDY4IDQ4IDg5IGVhIDQ4IGMxIGVhIDAzIDw4MD4gM2MgMDIgMDAgMGYgODUg
ODggMDIgMDAgMDAgNDggM2IgNWIgNjggMGYgODUgNTMgMDEgMDAgMDAgNjUgZmYKPiAgUlNQOiAw
MDAwOmZmZmY4ODgxMDAyY2U5YjggRUZMQUdTOiAwMDAxMDAxNgo+ICBSQVg6IGRmZmZmYzAwMDAw
MDAwMDAgUkJYOiAwMDAwMDAwMDAwMDAwMDcwIFJDWDogMDAwMDAwMDAwMDAwMDAwMAo+ICBSRFg6
IDAwMDAwMDAwMDAwMDAwMWIgUlNJOiAwMDAwMDAwMDAwMDAwMDBhIFJESTogMDAwMDAwMDAwMDAw
MDA3MAo+ICBSQlA6IDAwMDAwMDAwMDAwMDAwZDggUjA4OiAwMDAwMDAwMDAwMDAwMDAxIFIwOTog
ZmZmZmVkMTA3ZGRlNDlkMQo+ICBSMTA6IGZmZmY4ODgzZWVmMjRlOGIgUjExOiBmZmZmODg4MTAw
MmNlYzIwIFIxMjogMWZmZmYxMTAyMDA1OWQzNwo+ICBSMTM6IDAwMDAwMDAwMDAzZmZmN2IgUjE0
OiBmZmZmODg4MTAwMmNlYzIwIFIxNTogZGZmZmZjMDAwMDAwMDAwMAo+ICBGUzogIDAwMDA3Zjk2
M2YyMWQ5NDAoMDAwMCkgR1M6ZmZmZjg4ODQ1OGNhNjAwMCgwMDAwKSBrbmxHUzowMDAwMDAwMDAw
MDAwMDAwCj4gIENTOiAgMDAxMCBEUzogMDAwMCBFUzogMDAwMCBDUjA6IDAwMDAwMDAwODAwNTAw
MzMKPiAgQ1IyOiAwMDAwN2Y5NjNmNWVkZjcxIENSMzogMDAwMDAwMDEwNjcyYzAwMCBDUjQ6IDAw
MDAwMDAwMDAzNTBlZjAKPiAgQ2FsbCBUcmFjZToKPiAgIDxUQVNLPgo+ICAgY29kZXRhZ190cnls
b2NrX21vZHVsZV9saXN0KzB4ZC8weDIwCj4gICBhbGxvY190YWdfdG9wX3VzZXJzKzB4MzY5LzB4
NGIwCj4gICBfX3Nob3dfbWVtKzB4MWNkLzB4NmUwCj4gICB3YXJuX2FsbG9jKzB4MmIxLzB4Mzkw
Cj4gICBfX2FsbG9jX2Zyb3plbl9wYWdlc19ub3Byb2YrMHgxMmI5LzB4MjFhMAo+ICAgYWxsb2Nf
cGFnZXNfbXBvbCsweDEzNS8weDNlMAo+ICAgYWxsb2Nfc2xhYl9wYWdlKzB4ODIvMHhlMAo+ICAg
bmV3X3NsYWIrMHgyMTIvMHgyNDAKPiAgIF9fX3NsYWJfYWxsb2MrMHg4MmEvMHhlMDAKPiAgIDwv
VEFTSz4KPgo+QXMgRGF2aWQgV2FuZyBwb2ludHMgb3V0LCB0aGlzIGlzc3VlIGJlY2FtZSBlYXNp
ZXIgdG8gdHJpZ2dlciBhZnRlciBjb21taXQKPjc4MDEzOGIxMjM4MSAoImFsbG9jX3RhZzogY2hl
Y2sgbWVtX3Byb2ZpbGluZ19zdXBwb3J0IGluIGFsbG9jX3RhZ19pbml0IikuCj4KPkJlZm9yZSB0
aGUgY29tbWl0LCB0aGUgaXNzdWUgb2NjdXJyZWQgb25seSB3aGVuIGl0IGZhaWxlZCB0byBhbGxv
Y2F0ZQo+YW5kIGluaXRpYWxpemUgYWxsb2NfdGFnX2N0dHlwZSBvciBpZiBhIG1lbW9yeSBhbGxv
Y2F0aW9uIGZhaWxzIGJlZm9yZQo+YWxsb2NfdGFnX2luaXQoKSBpcyBjYWxsZWQuIEFmdGVyIHRo
ZSBjb21taXQsIGl0IGNhbiBiZSBlYXNpbHkgdHJpZ2dlcmVkCj53aGVuIG1lbW9yeSBwcm9maWxp
bmcgaXMgY29tcGlsZWQgYnV0IGRpc2FibGVkIGF0IGJvb3QuCj4KPlRvIHByb3Blcmx5IGRldGVy
bWluZSB3aGV0aGVyIGFsbG9jX3RhZ19pbml0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZAo+aXRzIGRh
dGEgc3RydWN0dXJlcyBpbml0aWFsaXplZCwgdmVyaWZ5IHRoYXQgYWxsb2NfdGFnX2N0dHlwZSBp
cyBhIHZhbGlkCj5wb2ludGVyIGJlZm9yZSBhY3F1aXJpbmcgdGhlIHNlbWFwaG9yZS4gSWYgdGhl
IHZhcmlhYmxlIGlzIE5VTEwgb3IgYW4gZXJyb3IKPnZhbHVlLCBpdCBoYXMgbm90IGJlZW4gcHJv
cGVybHkgaW5pdGlhbGl6ZWQuIEluIHN1Y2ggYSBjYXNlLCBqdXN0IHNraXAKPmFuZCBkbyBub3Qg
YXR0ZW1wdCB0byBhY3F1aXJlIHRoZSBzZW1hcGhvcmUuCj4KPlJlcG9ydGVkLWJ5OiBrZXJuZWwg
dGVzdCByb2JvdCA8b2xpdmVyLnNhbmdAaW50ZWwuY29tPgo+Q2xvc2VzOiBodHRwczovL2xvcmUu
a2VybmVsLm9yZy9vZS1sa3AvMjAyNTA2MTgxMzUxLmJiYTg2N2RkLWxrcEBpbnRlbC5jb20KPkNs
b3NlczogaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvb2UtbGtwLzIwMjUwNjEzMTcxMS41YjQxOTMx
Yy1sa3BAaW50ZWwuY29tCj5GaXhlczogNzgwMTM4YjEyMzgxICgiYWxsb2NfdGFnOiBjaGVjayBt
ZW1fcHJvZmlsaW5nX3N1cHBvcnQgaW4gYWxsb2NfdGFnX2luaXQiKQo+Rml4ZXM6IDE0MzhkMzQ5
ZDE2YiAoImxpYjogYWRkIG1lbW9yeSBhbGxvY2F0aW9ucyByZXBvcnQgaW4gc2hvd19tZW0oKSIp
Cj5DYzogc3RhYmxlQHZnZXIua2VybmVsLm9yZwo+U2lnbmVkLW9mZi1ieTogSGFycnkgWW9vIDxo
YXJyeS55b29Ab3JhY2xlLmNvbT4KPi0tLQo+Cj5AU3VyZW46IEkgZGlkIG5vdCBhZGQgYW5vdGhl
ciBwcl93YXJuKCkgYmVjYXVzZSBldmVyeSBlcnJvciBwYXRoIGluCj5hbGxvY190YWdfaW5pdCgp
IGFscmVhZHkgaGFzIHByX2VycigpLgo+Cj52MiAtPiB2MzoKPi0gQWRkZWQgYW5vdGhlciBDbG9z
ZXM6IHRhZyAoRGF2aWQpCj4tIE1vdmVkIHRoZSBjb25kaXRpb24gaW50byBhIHN0YW5kYWxvbmUg
aWYgYmxvY2sgZm9yIGJldHRlciByZWFkYWJpbGl0eQo+ICAoU3VyZW4pCj4tIFR5cG8gZml4IChT
dXJlbikKPgo+IGxpYi9hbGxvY190YWcuYyB8IDMgKysrCj4gMSBmaWxlIGNoYW5nZWQsIDMgaW5z
ZXJ0aW9ucygrKQo+Cj5kaWZmIC0tZ2l0IGEvbGliL2FsbG9jX3RhZy5jIGIvbGliL2FsbG9jX3Rh
Zy5jCj5pbmRleCA0MWNjZmIwMzViN2IuLmU5YjMzODQ4NzAwYSAxMDA2NDQKPi0tLSBhL2xpYi9h
bGxvY190YWcuYwo+KysrIGIvbGliL2FsbG9jX3RhZy5jCj5AQCAtMTI3LDYgKzEyNyw5IEBAIHNp
emVfdCBhbGxvY190YWdfdG9wX3VzZXJzKHN0cnVjdCBjb2RldGFnX2J5dGVzICp0YWdzLCBzaXpl
X3QgY291bnQsIGJvb2wgY2FuX3NsCj4gCXN0cnVjdCBjb2RldGFnX2J5dGVzIG47Cj4gCXVuc2ln
bmVkIGludCBpLCBuciA9IDA7Cj4gCj4rCWlmIChJU19FUlJfT1JfTlVMTChhbGxvY190YWdfY3R0
eXBlKSkKClNob3VsZCBhIHdhcm5pbmcgIGFkZGVkIGhlcmU/IGluZGljYXRpbmcgIGNvZGV0YWcg
bW9kdWxlIG5vdCByZWFkeSB5ZXQgYW5kIHRoZSBtZW1vcnkgZmFpbHVyZSBoYXBwZW5lZCBkdXJp
bmcgYm9vdDoKIGlmIChtZW1fcHJvZmlsaW5nX3N1cHBvcnQpIHByX3dhcm4oIi4uLgoKCj4rCQly
ZXR1cm4gMDsKPisKPiAJaWYgKGNhbl9zbGVlcCkKPiAJCWNvZGV0YWdfbG9ja19tb2R1bGVfbGlz
dChhbGxvY190YWdfY3R0eXBlLCB0cnVlKTsKPiAJZWxzZSBpZiAoIWNvZGV0YWdfdHJ5bG9ja19t
b2R1bGVfbGlzdChhbGxvY190YWdfY3R0eXBlKSkKPi0tIAo+Mi40My4wCg==

